# P-008 경매상세 (OpenAPI 기준 수정본)  

## 0. 목표

* 사용자가 경매 상품의 상세 정보를 조회한다.
* 경매 상태(OPEN/CLOSED)에 맞는 정보만 노출한다.
* 실시간 없이도 새로고침으로 최신 상태를 다시 조회한다.

---

## 1. 라우트

* /auctions/[id]

---

## 2. 사용자 시나리오

1. 사용자가 경매 상세 페이지에 진입한다.
2. 경매 상세 조회 API를 호출한다.
3. 경매 정보(이름/설명/가격/상태/종료시각/이미지/판매자/카테고리)가 표시된다.
4. 사용자가 새로고침하면 최신 데이터를 다시 조회한다.
5. 경매가 CLOSED면 종료 상태 UI로 표시된다.

※ OpenAPI에 **입찰/즉시구매 API가 정의되어 있지 않다.**
따라서 MVP에서는 입찰/즉시구매 액션을 구현하지 않고 상세 조회만 제공한다.

---

## 3. 화면 구성

### 3.1 레이아웃

* PublicLayout 적용 (L-002_PublicLayout.md 참조)
* 상단: 공통 헤더
* 본문:

  * 이미지 영역
  * 경매 정보 영역
  * 판매자 정보 영역
  * 상태 안내 영역(OPEN/CLOSED)

### 3.2 컴포넌트 구성

* ImageGallery (imageUrls)
* AuctionInfo

  * name
  * description
  * startPrice
  * currentHighestBid
  * buyNowPrice(있으면 표시)
  * bidCount
  * status (OPEN/CLOSED)
  * startAt
  * endAt
  * categoryName
* SellerInfo

  * seller.nickname
  * seller.reputationScore
* StatusBanner

  * OPEN: 진행중 안내
  * CLOSED: 종료 안내
* ErrorMessage
* LoadingSkeleton

### 3.3 컴포넌트 실행 환경

* CSR
* 페이지 진입 시 상세 조회 API 호출

---

## 4. 데이터 모델

### 4.1 상태(State)

* auction: {
  auctionId: number
  name: string
  description: string
  startPrice: number
  currentHighestBid: number
  buyNowPrice?: number
  bidCount: number
  status: "OPEN" | "CLOSED" | string
  startAt: string
  endAt: string
  imageUrls: string[]
  seller: {
  id: number
  nickname: string
  reputationScore: number
  }
  categoryName?: string
  } | null
* isLoading: boolean
* errorMessage: string | null

### 4.2 상태 소유 위치

* 페이지 로컬 상태

### 4.3 입력값

* 없음 (조회 중심)

---

## 5. API 연동

### 5.1 데이터 출처

* 도메인: 경매
* 담당자: 경매 담당

### 5.2 사용 API 목록

* GET /api/auctions/{auctionId}

### 5.3 API 호출 전략

* 최초 호출 시점:

  * 페이지 진입 시
* 재호출 트리거:

  * 사용자 수동 새로고침
* 성공 처리:

  * `RsDataAuctionDetailResponse.data`를 auction으로 매핑 후 렌더링
* 실패 처리:

  * ErrorMessage 표시
* 실시간 처리:

  * 사용하지 않음 (새로고침 기반)
* 캐싱 여부:

  * 없음

---

## 6. 권한 / 상태 / 예외 처리

### 6.1 접근 권한

* 접근 유형: Public

### 6.2 경매 상태별 처리

* OPEN:

  * 진행중 UI 표시
* CLOSED:

  * 종료 UI 표시

### 6.3 에러 처리

* API 실패 메시지는 CONTRACT_API.md 규칙에 따라 표시
* 404-1:

  * “존재하지 않는 경매” 안내
  * 경매 목록(`/auctions`) 이동 버튼 제공

---

## 7. 완료 조건 체크리스트

* [ ] 페이지 진입 시 경매 상세 정보가 로드된다
* [ ] 이미지/텍스트 정보가 정상 표시된다
* [ ] status(OPEN/CLOSED)에 따라 안내 UI가 표시된다
* [ ] 새로고침 시 서버 기준 상태가 반영된다
* [ ] API 실패 시 에러 메시지가 표시된다